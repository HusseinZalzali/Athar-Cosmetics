"use strict";(self.webpackChunkathar_cosmetics=self.webpackChunkathar_cosmetics||[]).push([[583],{2583:(I,u,s)=>{s.r(u),s.d(u,{AdminComponent:()=>O});var d=s(177),a=s(4341),l=s(1069),m=s(1785),t=s(4438),p=s(6241),_=s(8674),g=s(7473);const f=n=>["/admin/products",n,"edit"];function h(n,c){if(1&n){const e=t.RV6();t.j41(0,"button",6),t.bIt("click",function(){const r=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.activeTab=r.id)}),t.EFF(1),t.k0s()}if(2&n){const e=c.$implicit,o=t.XpG();t.AVh("active",o.activeTab===e.id),t.R7$(),t.SpI(" ",e.name," ")}}function v(n,c){if(1&n&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&n){const e=c.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function F(n,c){if(1&n&&t.nrm(0,"img",41),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getProductImage(e),t.B4B)("alt",e.name)}}function b(n,c){1&n&&(t.j41(0,"div",42),t.EFF(1,"No Image"),t.k0s())}function C(n,c){1&n&&(t.j41(0,"span",43),t.EFF(1,"Featured"),t.k0s())}function k(n,c){if(1&n&&(t.j41(0,"p",44),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI("Category: ",e.category.name,"")}}function j(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",28)(1,"div",29),t.DNE(2,F,1,2,"img",30)(3,b,2,0,"div",31),t.k0s(),t.j41(4,"div",32)(5,"h3"),t.EFF(6),t.k0s(),t.j41(7,"p",33),t.EFF(8),t.k0s(),t.j41(9,"p",34)(10,"span",35),t.EFF(11),t.nI1(12,"number"),t.k0s(),t.EFF(13," | "),t.j41(14,"span"),t.EFF(15),t.k0s(),t.DNE(16,C,2,0,"span",36),t.k0s(),t.DNE(17,k,2,1,"p",37),t.k0s(),t.j41(18,"div",38)(19,"a",39),t.EFF(20,"Edit"),t.k0s(),t.j41(21,"button",40),t.bIt("click",function(){const r=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.confirmDeleteProduct(r))}),t.EFF(22,"Delete"),t.k0s()()()}if(2&n){const e=c.$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("ngIf",o.getProductImage(e)),t.R7$(),t.Y8G("ngIf",!o.getProductImage(e)),t.R7$(3),t.JRh(e.name),t.R7$(2),t.SpI("SKU: ",e.sku,""),t.R7$(3),t.JRh("$"+t.i5U(12,13,e.price,"1.2-2")),t.R7$(3),t.AVh("stock-low",e.stock<10)("stock-out",0===e.stock),t.R7$(),t.SpI(" Stock: ",e.stock," "),t.R7$(),t.Y8G("ngIf",e.is_featured),t.R7$(),t.Y8G("ngIf",e.category),t.R7$(2),t.Y8G("routerLink",t.eq3(16,f,e.id))}}function x(n,c){1&n&&(t.j41(0,"div",45)(1,"p"),t.EFF(2,"No products found matching your filters."),t.k0s()())}function P(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"h2"),t.EFF(3,"Products"),t.k0s(),t.j41(4,"a",9),t.EFF(5," Add Product "),t.k0s()(),t.j41(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),t.EFF(10,"Search Products"),t.k0s(),t.j41(11,"input",13),t.mxI("ngModelChange",function(r){t.eBV(e);const i=t.XpG();return t.DH7(i.productSearchQuery,r)||(i.productSearchQuery=r),t.Njj(r)}),t.bIt("input",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.filterProducts())}),t.k0s()(),t.j41(12,"div",12)(13,"label"),t.EFF(14,"Category"),t.k0s(),t.j41(15,"select",14),t.mxI("ngModelChange",function(r){t.eBV(e);const i=t.XpG();return t.DH7(i.productCategoryFilter,r)||(i.productCategoryFilter=r),t.Njj(r)}),t.bIt("change",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.filterProducts())}),t.j41(16,"option",15),t.EFF(17,"All Categories"),t.k0s(),t.DNE(18,v,2,2,"option",16),t.k0s()(),t.j41(19,"div",12)(20,"label"),t.EFF(21,"Stock Status"),t.k0s(),t.j41(22,"select",14),t.mxI("ngModelChange",function(r){t.eBV(e);const i=t.XpG();return t.DH7(i.productStockFilter,r)||(i.productStockFilter=r),t.Njj(r)}),t.bIt("change",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.filterProducts())}),t.j41(23,"option",15),t.EFF(24,"All"),t.k0s(),t.j41(25,"option",17),t.EFF(26,"In Stock"),t.k0s(),t.j41(27,"option",18),t.EFF(28,"Low Stock (< 10)"),t.k0s(),t.j41(29,"option",19),t.EFF(30,"Out of Stock"),t.k0s()()(),t.j41(31,"div",12)(32,"label"),t.EFF(33,"Featured"),t.k0s(),t.j41(34,"select",14),t.mxI("ngModelChange",function(r){t.eBV(e);const i=t.XpG();return t.DH7(i.productFeaturedFilter,r)||(i.productFeaturedFilter=r),t.Njj(r)}),t.bIt("change",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.filterProducts())}),t.j41(35,"option",15),t.EFF(36,"All"),t.k0s(),t.j41(37,"option",20),t.EFF(38,"Featured Only"),t.k0s(),t.j41(39,"option",21),t.EFF(40,"Not Featured"),t.k0s()()(),t.j41(41,"button",22),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.clearFilters())}),t.EFF(42,"Clear Filters"),t.k0s()()(),t.j41(43,"div",23)(44,"p"),t.EFF(45),t.k0s()(),t.j41(46,"div",24),t.DNE(47,j,23,18,"div",25),t.k0s(),t.DNE(48,x,3,0,"div",26),t.k0s()}if(2&n){const e=t.XpG();t.R7$(11),t.R50("ngModel",e.productSearchQuery),t.R7$(4),t.R50("ngModel",e.productCategoryFilter),t.R7$(3),t.Y8G("ngForOf",e.categories),t.R7$(4),t.R50("ngModel",e.productStockFilter),t.R7$(12),t.R50("ngModel",e.productFeaturedFilter),t.R7$(11),t.Lme("Showing ",e.filteredProducts.length," of ",e.products.length," products"),t.R7$(2),t.Y8G("ngForOf",e.filteredProducts),t.R7$(),t.Y8G("ngIf",0===e.filteredProducts.length)}}function E(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",48)(1,"div",49)(2,"div")(3,"h3"),t.EFF(4),t.k0s(),t.j41(5,"p"),t.EFF(6),t.nI1(7,"date"),t.k0s()(),t.j41(8,"div",50)(9,"select",51),t.mxI("ngModelChange",function(r){const i=t.eBV(e).$implicit;return t.DH7(i.status,r)||(i.status=r),t.Njj(r)}),t.bIt("change",function(){const r=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.updateOrderStatus(r.id,r.status))}),t.j41(10,"option",52),t.EFF(11,"Pending"),t.k0s(),t.j41(12,"option",53),t.EFF(13,"Paid"),t.k0s(),t.j41(14,"option",54),t.EFF(15,"Shipped"),t.k0s(),t.j41(16,"option",55),t.EFF(17,"Delivered"),t.k0s(),t.j41(18,"option",56),t.EFF(19,"Cancelled"),t.k0s()()()(),t.j41(20,"div",57)(21,"p")(22,"strong"),t.EFF(23,"Total:"),t.k0s(),t.EFF(24),t.nI1(25,"number"),t.k0s(),t.j41(26,"p")(27,"strong"),t.EFF(28,"Items:"),t.k0s(),t.EFF(29),t.k0s()()()}if(2&n){const e=c.$implicit;t.R7$(4),t.SpI("Order #",e.id,""),t.R7$(2),t.Lme("",e.shipping_name," | ",t.i5U(7,6,e.created_at,"short"),""),t.R7$(3),t.R50("ngModel",e.status),t.R7$(15),t.SpI(" ","$"+t.i5U(25,9,e.total,"1.2-2"),""),t.R7$(5),t.SpI(" ",e.items.length,"")}}function y(n,c){if(1&n&&(t.j41(0,"div",7)(1,"h2"),t.EFF(2,"Orders"),t.k0s(),t.j41(3,"div",46),t.DNE(4,E,30,12,"div",47),t.k0s()()),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.orders)}}function M(n,c){if(1&n){const e=t.RV6();t.j41(0,"app-confirm-modal",58),t.bIt("confirm",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.deleteProduct())})("cancel",function(){t.eBV(e);const r=t.XpG();return r.showDeleteConfirm=!1,t.Njj(r.productToDelete=null)}),t.k0s()}2&n&&t.Y8G("danger",!0)}let O=(()=>{class n{constructor(e,o,r,i){this.productService=e,this.orderService=o,this.router=r,this.notificationService=i,this.activeTab="products",this.tabs=[{id:"products",name:"Products"},{id:"orders",name:"Orders"}],this.products=[],this.categories=[],this.orders=[],this.loading=!0,this.productSearchQuery="",this.productCategoryFilter="",this.productStockFilter="",this.productFeaturedFilter="",this.filteredProducts=[],this.showDeleteConfirm=!1,this.productToDelete=null}ngOnInit(){this.loadProducts(),this.loadCategories(),this.loadOrders()}filterProducts(){this.filteredProducts=this.products.filter(e=>{if(this.productSearchQuery){const o=this.productSearchQuery.toLowerCase();if(!(e.name?.toLowerCase().includes(o)||e.name_en?.toLowerCase().includes(o)||e.sku?.toLowerCase().includes(o)))return!1}return!(this.productCategoryFilter&&e.category_id!==Number(this.productCategoryFilter)||this.productStockFilter&&("in_stock"===this.productStockFilter&&0===e.stock||"low_stock"===this.productStockFilter&&(e.stock>=10||0===e.stock)||"out_of_stock"===this.productStockFilter&&e.stock>0))&&(""===this.productFeaturedFilter||e.is_featured===("true"===this.productFeaturedFilter))})}clearFilters(){this.productSearchQuery="",this.productCategoryFilter="",this.productStockFilter="",this.productFeaturedFilter="",this.filterProducts()}getProductImage(e){if(e.images&&e.images.length>0){const o=e.images[0].url;return o.startsWith("http://")||o.startsWith("https://")||o.startsWith("/")?o:`/${o}`}return null}loadProducts(){this.productService.getProducts().subscribe({next:e=>{e.success&&(this.products=e.data,this.filterProducts())}})}loadCategories(){this.productService.getCategories().subscribe({next:e=>{e.success&&(this.categories=e.data)}})}loadOrders(){this.orderService.getAllOrders().subscribe({next:e=>{e.success&&(this.orders=e.data)}})}confirmDeleteProduct(e){this.productToDelete=e.id,this.showDeleteConfirm=!0}deleteProduct(){this.productToDelete&&this.productService.deleteProduct(this.productToDelete).subscribe({next:()=>{this.notificationService.success("Success","Product deleted successfully"),this.showDeleteConfirm=!1,this.productToDelete=null,this.loadProducts()},error:e=>{this.notificationService.error("Error",e.error?.message||"Failed to delete product"),this.showDeleteConfirm=!1,this.productToDelete=null}})}updateOrderStatus(e,o){this.orderService.updateOrderStatus(e,o).subscribe({next:()=>{this.notificationService.success("Success","Order status updated successfully"),this.loadOrders()},error:r=>{this.notificationService.error("Error",r.error?.message||"Failed to update order status")}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(p.b),t.rXU(_.Q),t.rXU(l.Ix),t.rXU(g.J))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-admin"]],standalone:!0,features:[t.aNF],decls:8,vars:4,consts:[[1,"admin-page","container"],[1,"page-title"],[1,"admin-tabs"],["class","tab-btn",3,"active","click",4,"ngFor","ngForOf"],["class","tab-content",4,"ngIf"],["title","Delete Product","message","Are you sure you want to delete this product? This action cannot be undone.","confirmText","Delete","cancelText","Cancel",3,"danger","confirm","cancel",4,"ngIf"],[1,"tab-btn",3,"click"],[1,"tab-content"],[1,"section-header"],["routerLink","/admin/products/new",1,"btn","btn-primary"],[1,"admin-filters","card"],[1,"filter-row"],[1,"filter-group"],["type","text","placeholder","Search by name, SKU...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","in_stock"],["value","low_stock"],["value","out_of_stock"],["value","true"],["value","false"],[1,"btn","btn-secondary","btn-small",3,"click"],[1,"products-stats"],[1,"products-list"],["class","product-item card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[3,"value"],[1,"product-item","card"],[1,"product-preview"],["class","product-thumbnail",3,"src","alt",4,"ngIf"],["class","product-thumbnail placeholder",4,"ngIf"],[1,"product-info"],[1,"product-sku"],[1,"product-details"],[1,"price"],["class","featured-badge",4,"ngIf"],["class","product-category",4,"ngIf"],[1,"product-actions"],[1,"btn","btn-secondary","btn-small",3,"routerLink"],[1,"btn","btn-secondary","btn-small","btn-danger",3,"click"],[1,"product-thumbnail",3,"src","alt"],[1,"product-thumbnail","placeholder"],[1,"featured-badge"],[1,"product-category"],[1,"empty-state"],[1,"orders-list"],["class","order-item card",4,"ngFor","ngForOf"],[1,"order-item","card"],[1,"order-header"],[1,"order-controls"],[1,"status-select",3,"ngModelChange","change","ngModel"],["value","pending"],["value","paid"],["value","shipped"],["value","delivered"],["value","cancelled"],[1,"order-details"],["title","Delete Product","message","Are you sure you want to delete this product? This action cannot be undone.","confirmText","Delete","cancelText","Cancel",3,"confirm","cancel","danger"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2,"Admin Dashboard"),t.k0s(),t.j41(3,"div",2),t.DNE(4,h,2,3,"button",3),t.k0s(),t.DNE(5,P,49,9,"div",4)(6,y,5,1,"div",4)(7,M,1,1,"app-confirm-modal",5),t.k0s()),2&o&&(t.R7$(4),t.Y8G("ngForOf",r.tabs),t.R7$(),t.Y8G("ngIf","products"===r.activeTab),t.R7$(),t.Y8G("ngIf","orders"===r.activeTab),t.R7$(),t.Y8G("ngIf",r.showDeleteConfirm))},dependencies:[d.MD,d.Sq,d.bT,d.QX,d.vh,a.YN,a.xH,a.y7,a.me,a.wz,a.BC,a.vS,l.iI,l.Wk,m.B],styles:[".admin-page[_ngcontent-%COMP%]{padding:2rem 0}.admin-tabs[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;border-bottom:2px solid var(--neutral-medium)}.tab-btn[_ngcontent-%COMP%]{padding:1rem 2rem;background:transparent;border:none;border-bottom:3px solid transparent;color:var(--text-secondary);cursor:pointer;font-size:1rem;transition:all .3s ease;&.active{color:var(--accent);border-bottom-color:var(--accent)}&:hover{color:var(--accent)}}.tab-content[_ngcontent-%COMP%]{margin-top:2rem}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.products-list[_ngcontent-%COMP%], .orders-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.product-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;gap:1.5rem}.product-preview[_ngcontent-%COMP%]{width:80px;height:80px;flex-shrink:0}.product-thumbnail[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:var(--border-radius-small);border:1px solid var(--neutral-medium);&.placeholder{display:flex;align-items:center;justify-content:center;background:var(--neutral-light);color:var(--text-muted);font-size:.75rem}}.order-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem}.product-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.status-select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid var(--neutral-medium);border-radius:var(--border-radius);background-color:var(--bg-secondary);color:var(--text-primary)}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000c;display:flex;align-items:center;justify-content:center;z-index:2000}.modal-content[_ngcontent-%COMP%]{background-color:var(--surface-light);padding:2rem;border-radius:var(--border-radius);max-width:600px;width:90%;max-height:90vh;overflow-y:auto;h2{margin-bottom:2rem;color:var(--accent)}.form-actions{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}.file-preview{margin-top:1rem;padding:1rem;background:var(--bg-secondary);border-radius:var(--border-radius-small)}.preview-image{max-width:200px;max-height:200px;margin-top:.5rem;border-radius:var(--border-radius-small)}.images-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;margin-bottom:1.5rem}.image-item{border:1px solid var(--neutral-medium);border-radius:var(--border-radius-small);overflow:hidden;background:#fff;img{width:100%;height:150px;object-fit:cover;display:block}.btn{width:100%;border-radius:0;margin-top:.5rem}}}.admin-filters[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem}.filter-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;align-items:flex-end}.filter-group[_ngcontent-%COMP%]{flex:1;min-width:150px;label{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-secondary)}}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--neutral-medium);border-radius:var(--border-radius-small);font-size:.95rem;font-family:Roboto,sans-serif}.products-stats[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text-secondary);font-size:.9rem}.product-sku[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);margin:.25rem 0}.product-details[_ngcontent-%COMP%]{margin:.5rem 0;font-size:.95rem}.price[_ngcontent-%COMP%]{color:var(--accent);font-weight:600}.stock-low[_ngcontent-%COMP%]{color:var(--warning)}.stock-out[_ngcontent-%COMP%]{color:var(--error)}.featured-badge[_ngcontent-%COMP%]{display:inline-block;background:linear-gradient(135deg,var(--accent) 0%,var(--accent-gold) 100%);color:#fff;padding:.25rem .5rem;border-radius:var(--border-radius-small);font-size:.75rem;font-weight:600;margin-left:.5rem}.product-category[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);margin-top:.25rem}.btn-danger[_ngcontent-%COMP%]{background-color:var(--error);color:#fff;border-color:var(--error);&:hover{background-color:#d32f2f}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--text-muted)}"]})}}return n})()}}]);