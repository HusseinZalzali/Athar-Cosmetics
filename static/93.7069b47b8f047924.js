"use strict";(self.webpackChunkathar_cosmetics=self.webpackChunkathar_cosmetics||[]).push([[93],{2093:(P,g,s)=>{s.r(g),s.d(g,{ShopComponent:()=>I});var p=s(177),d=s(1069),c=s(4341),e=s(4438),m=s(6241),u=s(6868);const _=a=>["/product",a];function h(a,l){if(1&a&&(e.j41(0,"option",7),e.EFF(1),e.k0s()),2&a){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function C(a,l){if(1&a){const t=e.RV6();e.j41(0,"div",21),e.bIt("mouseenter",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.startImageCarousel(n.id))})("mouseleave",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.stopImageCarousel(n.id))}),e.j41(1,"div",22)(2,"img",23),e.bIt("error",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleImageError(n))})("load",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleImageLoad(n))}),e.k0s()(),e.j41(3,"div",24)(4,"h3",25),e.EFF(5),e.k0s(),e.j41(6,"p",26),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"button",27),e.bIt("click",function(n){const i=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.addToCart(i,n))}),e.EFF(10),e.k0s()()()}if(2&a){const t=l.$implicit,r=e.XpG(2);e.Y8G("routerLink",e.eq3(10,_,t.id)),e.R7$(2),e.Y8G("src",r.getProductImage(t,r.getCurrentImageIndex(t.id)),e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh("$"+e.i5U(8,7,t.price,"1.2-2")),e.R7$(2),e.Y8G("disabled",0===t.stock),e.R7$(),e.SpI(" ",0===t.stock?"Out of Stock":"Add to Cart"," ")}}function f(a,l){if(1&a&&(e.j41(0,"div",19),e.DNE(1,C,11,12,"div",20),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.products)}}function v(a,l){1&a&&(e.j41(0,"div",28),e.nrm(1,"div",29),e.j41(2,"p"),e.EFF(3,"Loading..."),e.k0s()())}function M(a,l){1&a&&(e.j41(0,"div",30),e.EFF(1," No products found "),e.k0s())}let I=(()=>{class a{constructor(t,r,n){this.productService=t,this.cartService=r,this.route=n,this.products=[],this.categories=[],this.loading=!0,this.productImageIndices=new Map,this.carouselIntervals=new Map,this.searchQuery="",this.selectedCategory=null,this.minPrice=null,this.maxPrice=null,this.sortBy="newest"}ngOnInit(){this.route.queryParams.subscribe(t=>{t.category&&(this.selectedCategory=+t.category),this.loadData()}),this.loadCategories()}loadCategories(){this.productService.getCategories().subscribe({next:t=>{t.success&&(this.categories=t.data)}})}loadData(){this.loading=!0;const t={sort:this.sortBy};this.searchQuery&&(t.search=this.searchQuery),this.selectedCategory&&(t.category=this.selectedCategory),this.minPrice&&(t.minPrice=this.minPrice),this.maxPrice&&(t.maxPrice=this.maxPrice),this.productService.getProducts(t).subscribe({next:r=>{r.success&&(this.products=r.data),this.loading=!1},error:()=>{this.loading=!1}})}applyFilters(){this.loadData()}addToCart(t,r){r.stopPropagation(),this.cartService.addToCart(t,1)}getProductImage(t,r=0){if(t.images&&t.images.length>0){const n=Math.min(r,t.images.length-1),i=t.images[n];if(i&&i.url){const o=i.url;return o.startsWith("http://")||o.startsWith("https://")||o.startsWith("/")?o:`/${o}`}}return"https://via.placeholder.com/300x300?text=No+Image"}getCurrentImageIndex(t){return this.productImageIndices.get(t)||0}startImageCarousel(t){const r=this.products.find(i=>i.id===t);if(!r||!r.images||r.images.length<=1)return;this.stopImageCarousel(t);const n=setInterval(()=>{const o=(this.getCurrentImageIndex(t)+1)%r.images.length;this.productImageIndices.set(t,o)},800);this.carouselIntervals.set(t,n)}stopImageCarousel(t){const r=this.carouselIntervals.get(t);r&&(clearInterval(r),this.carouselIntervals.delete(t)),this.productImageIndices.set(t,0)}handleImageError(t){t.target.src="https://via.placeholder.com/300x300?text=No+Image"}handleImageLoad(t){t.target.style.opacity="1"}ngOnDestroy(){this.carouselIntervals.forEach(t=>clearInterval(t)),this.carouselIntervals.clear(),this.productImageIndices.clear()}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(m.b),e.rXU(u.m),e.rXU(d.nX))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-shop"]],standalone:!0,features:[e.aNF],decls:38,vars:10,consts:[[1,"shop-page","container"],[1,"page-title"],[1,"shop-content"],[1,"filters-sidebar"],[1,"filter-section"],["type","text","placeholder","Search products...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filter-select",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"price-range"],["type","number","placeholder","Min",1,"price-input",3,"ngModelChange","input","ngModel"],["type","number","placeholder","Max",1,"price-input",3,"ngModelChange","input","ngModel"],["value","newest"],["value","price_asc"],["value","price_desc"],[1,"products-main"],["class","products-grid",4,"ngIf"],["class","loading",4,"ngIf"],["class","no-products",4,"ngIf"],[1,"products-grid"],["class","product-card card",3,"routerLink","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"product-card","card",3,"mouseenter","mouseleave","routerLink"],[1,"product-image"],["loading","lazy",1,"product-img",3,"error","load","src","alt"],[1,"product-info"],[1,"product-name"],[1,"product-price"],[1,"btn","btn-primary","btn-small",3,"click","disabled"],[1,"loading"],[1,"loading-spinner"],[1,"no-products"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Shop"),e.k0s(),e.j41(3,"div",2)(4,"aside",3)(5,"div",4)(6,"h3"),e.EFF(7,"Search"),e.k0s(),e.j41(8,"input",5),e.mxI("ngModelChange",function(o){return e.DH7(n.searchQuery,o)||(n.searchQuery=o),o}),e.bIt("input",function(){return n.applyFilters()}),e.k0s()(),e.j41(9,"div",4)(10,"h3"),e.EFF(11,"Category"),e.k0s(),e.j41(12,"select",6),e.mxI("ngModelChange",function(o){return e.DH7(n.selectedCategory,o)||(n.selectedCategory=o),o}),e.bIt("change",function(){return n.applyFilters()}),e.j41(13,"option",7),e.EFF(14,"All"),e.k0s(),e.DNE(15,h,2,2,"option",8),e.k0s()(),e.j41(16,"div",4)(17,"h3"),e.EFF(18,"Price"),e.k0s(),e.j41(19,"div",9)(20,"input",10),e.mxI("ngModelChange",function(o){return e.DH7(n.minPrice,o)||(n.minPrice=o),o}),e.bIt("input",function(){return n.applyFilters()}),e.k0s(),e.j41(21,"span"),e.EFF(22,"-"),e.k0s(),e.j41(23,"input",11),e.mxI("ngModelChange",function(o){return e.DH7(n.maxPrice,o)||(n.maxPrice=o),o}),e.bIt("input",function(){return n.applyFilters()}),e.k0s()()(),e.j41(24,"div",4)(25,"h3"),e.EFF(26,"Sort"),e.k0s(),e.j41(27,"select",6),e.mxI("ngModelChange",function(o){return e.DH7(n.sortBy,o)||(n.sortBy=o),o}),e.bIt("change",function(){return n.applyFilters()}),e.j41(28,"option",12),e.EFF(29,"Newest"),e.k0s(),e.j41(30,"option",13),e.EFF(31,"Price: Low to High"),e.k0s(),e.j41(32,"option",14),e.EFF(33,"Price: High to Low"),e.k0s()()()(),e.j41(34,"main",15),e.DNE(35,f,2,1,"div",16)(36,v,4,0,"div",17)(37,M,2,0,"div",18),e.k0s()()()),2&r&&(e.R7$(8),e.R50("ngModel",n.searchQuery),e.R7$(4),e.R50("ngModel",n.selectedCategory),e.R7$(),e.Y8G("value",null),e.R7$(2),e.Y8G("ngForOf",n.categories),e.R7$(5),e.R50("ngModel",n.minPrice),e.R7$(3),e.R50("ngModel",n.maxPrice),e.R7$(4),e.R50("ngModel",n.sortBy),e.R7$(8),e.Y8G("ngIf",n.products.length>0),e.R7$(),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",!n.loading&&0===n.products.length))},dependencies:[p.MD,p.Sq,p.bT,p.QX,d.iI,d.Wk,c.YN,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.vS],styles:[".shop-page[_ngcontent-%COMP%]{padding:2rem 0}.page-title[_ngcontent-%COMP%]{margin-bottom:2rem;color:var(--accent)}.shop-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr;gap:2rem}.filters-sidebar[_ngcontent-%COMP%]{background-color:var(--surface-light);padding:1.5rem;border-radius:var(--border-radius);height:-moz-fit-content;height:fit-content;position:sticky;top:100px}.filter-section[_ngcontent-%COMP%]{margin-bottom:2rem;h3{font-size:1rem;margin-bottom:1rem;color:var(--accent)}}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .price-input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid var(--neutral-medium);border-radius:var(--border-radius);background-color:var(--bg-secondary);color:var(--text-primary)}.price-range[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;.price-input{flex:1}}.products-main[_ngcontent-%COMP%]{min-height:400px}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:2rem}.product-card[_ngcontent-%COMP%]{cursor:pointer;overflow:hidden}.product-image[_ngcontent-%COMP%]{width:100%;height:300px;overflow:hidden;background-color:var(--bg-secondary);display:flex;align-items:center;justify-content:center;margin-bottom:1rem;position:relative;img{width:100%;height:100%;object-fit:cover;transition:opacity .5s ease-in-out}}.product-info[_ngcontent-%COMP%]{text-align:center}.product-name[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.5rem;color:var(--text-primary)}.product-price[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--accent);font-weight:600;margin-bottom:1rem}.no-products[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--neutral-medium)}@media (max-width: 768px){.shop-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-sidebar[_ngcontent-%COMP%]{position:static;margin-bottom:2rem}.products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem}.product-image[_ngcontent-%COMP%]{height:200px}}@media (max-width: 480px){.filters-sidebar[_ngcontent-%COMP%]{padding:1rem}.products-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.product-card[_ngcontent-%COMP%]{max-width:100%}}"]})}}return a})()}}]);