"use strict";(self.webpackChunkathar_cosmetics=self.webpackChunkathar_cosmetics||[]).push([[693],{6693:(R,d,i)=>{i.r(d),i.d(d,{CheckoutComponent:()=>E});var m=i(177),l=i(1069),o=i(4341),t=i(4438),p=i(6868),h=i(8674),g=i(8756);function _(r,c){if(1&r&&(t.j41(0,"div",25),t.EFF(1),t.k0s()),2&r){const e=t.XpG(2);t.R7$(),t.SpI(" ","ar"===e.currentLang?"\u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628":"Name is required"," ")}}function v(r,c){if(1&r&&(t.j41(0,"div",25),t.EFF(1),t.k0s()),2&r){const e=t.XpG(2);t.R7$(),t.SpI(" ","ar"===e.currentLang?"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0645\u0637\u0644\u0648\u0628":"Phone is required"," ")}}function F(r,c){if(1&r&&(t.j41(0,"div",25),t.EFF(1),t.k0s()),2&r){const e=t.XpG(2);t.R7$(),t.SpI(" ","ar"===e.currentLang?"\u0627\u0644\u0645\u062f\u064a\u0646\u0629 \u0645\u0637\u0644\u0648\u0628\u0629":"City is required"," ")}}function k(r,c){if(1&r&&(t.j41(0,"div",25),t.EFF(1),t.k0s()),2&r){const e=t.XpG(2);t.R7$(),t.SpI(" ","ar"===e.currentLang?"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0645\u0637\u0644\u0648\u0628":"Address is required"," ")}}function f(r,c){if(1&r&&(t.j41(0,"div",26)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.nI1(5,"number"),t.k0s()()),2&r){const e=c.$implicit;t.R7$(2),t.Lme("",e.product.name," \xd7 ",e.quantity,""),t.R7$(2),t.JRh("$"+t.i5U(5,3,e.product.price*e.quantity,"1.2-2"))}}function y(r,c){if(1&r){const e=t.RV6();t.j41(0,"div",4)(1,"form",5),t.bIt("ngSubmit",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.placeOrder())}),t.j41(2,"section",6)(3,"h2"),t.EFF(4),t.k0s(),t.j41(5,"div",7)(6,"label"),t.EFF(7),t.k0s(),t.nrm(8,"input",8),t.DNE(9,_,2,1,"div",9),t.k0s(),t.j41(10,"div",7)(11,"label"),t.EFF(12),t.k0s(),t.nrm(13,"input",10),t.DNE(14,v,2,1,"div",9),t.k0s(),t.j41(15,"div",7)(16,"label"),t.EFF(17),t.k0s(),t.nrm(18,"input",11),t.DNE(19,F,2,1,"div",9),t.k0s(),t.j41(20,"div",7)(21,"label"),t.EFF(22),t.k0s(),t.nrm(23,"textarea",12),t.DNE(24,k,2,1,"div",9),t.k0s(),t.j41(25,"div",7)(26,"label"),t.EFF(27),t.k0s(),t.nrm(28,"textarea",13),t.k0s()(),t.j41(29,"section",6)(30,"h2"),t.EFF(31),t.k0s(),t.j41(32,"div",14)(33,"label",15),t.nrm(34,"input",16),t.j41(35,"span"),t.EFF(36),t.k0s()(),t.j41(37,"label",17),t.nrm(38,"input",18),t.j41(39,"span"),t.EFF(40),t.k0s()()()(),t.j41(41,"section",19)(42,"h2"),t.EFF(43),t.k0s(),t.j41(44,"div",20),t.DNE(45,f,6,6,"div",21),t.k0s(),t.j41(46,"div",22)(47,"span"),t.EFF(48),t.k0s(),t.j41(49,"span",23),t.EFF(50),t.nI1(51,"number"),t.k0s()(),t.j41(52,"button",24),t.EFF(53),t.k0s()()()()}if(2&r){let e,n,a,s;const u=t.XpG();t.R7$(),t.Y8G("formGroup",u.checkoutForm),t.R7$(3),t.JRh("ar"===u.currentLang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062d\u0646":"Shipping Information"),t.R7$(3),t.SpI("","ar"===u.currentLang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644":"Full Name"," *"),t.R7$(2),t.Y8G("ngIf",(null==(e=u.checkoutForm.get("name"))?null:e.hasError("required"))&&(null==(e=u.checkoutForm.get("name"))?null:e.touched)),t.R7$(3),t.SpI("","ar"===u.currentLang?"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641":"Phone Number"," *"),t.R7$(2),t.Y8G("ngIf",(null==(n=u.checkoutForm.get("phone"))?null:n.hasError("required"))&&(null==(n=u.checkoutForm.get("phone"))?null:n.touched)),t.R7$(3),t.SpI("","ar"===u.currentLang?"\u0627\u0644\u0645\u062f\u064a\u0646\u0629":"City"," *"),t.R7$(2),t.Y8G("ngIf",(null==(a=u.checkoutForm.get("city"))?null:a.hasError("required"))&&(null==(a=u.checkoutForm.get("city"))?null:a.touched)),t.R7$(3),t.SpI("","ar"===u.currentLang?"\u0627\u0644\u0639\u0646\u0648\u0627\u0646":"Street Address"," *"),t.R7$(2),t.Y8G("ngIf",(null==(s=u.checkoutForm.get("street"))?null:s.hasError("required"))&&(null==(s=u.checkoutForm.get("street"))?null:s.touched)),t.R7$(3),t.JRh("ar"===u.currentLang?"\u0645\u0644\u0627\u062d\u0638\u0627\u062a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)":"Notes (Optional)"),t.R7$(4),t.JRh("ar"===u.currentLang?"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639":"Payment Method"),t.R7$(5),t.JRh("ar"===u.currentLang?"\u0627\u0644\u062f\u0641\u0639 \u0639\u0646\u062f \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645":"Cash on Delivery"),t.R7$(4),t.JRh("ar"===u.currentLang?"\u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a (\u0642\u0631\u064a\u0628\u0627\u064b)":"Online Payment (Coming Soon)"),t.R7$(3),t.JRh("ar"===u.currentLang?"\u0645\u0644\u062e\u0635 \u0627\u0644\u0637\u0644\u0628":"Order Summary"),t.R7$(2),t.Y8G("ngForOf",u.cartItems),t.R7$(3),t.JRh("ar"===u.currentLang?"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:":"Total:"),t.R7$(2),t.JRh("$"+t.i5U(51,20,u.subtotal,"1.2-2")),t.R7$(2),t.Y8G("disabled",u.checkoutForm.invalid||u.processing),t.R7$(),t.SpI(" ",u.processing?"ar"===u.currentLang?"\u062c\u0627\u0631\u064a \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629...":"Processing...":"ar"===u.currentLang?"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0637\u0644\u0628":"Place Order"," ")}}function C(r,c){if(1&r&&(t.j41(0,"div",27)(1,"p"),t.EFF(2),t.k0s(),t.j41(3,"a",28),t.EFF(4),t.k0s()()),2&r){const e=t.XpG();t.R7$(2),t.JRh("ar"===e.currentLang?"\u0627\u0644\u0633\u0644\u0629 \u0641\u0627\u0631\u063a\u0629":"Your cart is empty"),t.R7$(2),t.JRh("ar"===e.currentLang?"\u062a\u0633\u0648\u0642 \u0627\u0644\u0622\u0646":"Shop Now")}}let E=(()=>{class r{constructor(e,n,a,s,u){this.fb=e,this.cartService=n,this.orderService=a,this.languageService=s,this.router=u,this.cartItems=[],this.subtotal=0,this.processing=!1,this.currentLang="en",this.checkoutForm=this.fb.group({name:["",o.k0.required],phone:["",o.k0.required],city:["",o.k0.required],street:["",o.k0.required],notes:[""],paymentMethod:["cash_on_delivery",o.k0.required]})}ngOnInit(){this.languageService.currentLanguage$.subscribe(e=>{this.currentLang=e}),this.cartService.cart$.subscribe(e=>{this.cartItems=e,this.subtotal=this.cartService.getCartTotal()}),0===this.cartItems.length&&(this.cartItems=this.cartService.getCartItems(),this.subtotal=this.cartService.getCartTotal())}placeOrder(){if(this.checkoutForm.invalid)return;this.processing=!0;const e={items:this.cartItems.map(n=>({product_id:n.product.id,quantity:n.quantity})),shipping:{name:this.checkoutForm.value.name,phone:this.checkoutForm.value.phone,city:this.checkoutForm.value.city,street:this.checkoutForm.value.street,notes:this.checkoutForm.value.notes},payment_method:this.checkoutForm.value.paymentMethod};this.orderService.createOrder(e).subscribe({next:n=>{n.success&&(this.cartService.clearCart(),this.router.navigate(["/account"])),this.processing=!1},error:()=>{this.processing=!1}})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(o.ok),t.rXU(p.m),t.rXU(h.Q),t.rXU(g.g),t.rXU(l.Ix))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-checkout"]],standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[[1,"checkout-page","container"],[1,"page-title"],["class","checkout-content",4,"ngIf"],["class","empty-cart",4,"ngIf"],[1,"checkout-content"],[1,"checkout-form",3,"ngSubmit","formGroup"],[1,"form-section","card"],[1,"form-group"],["type","text","formControlName","name"],["class","error",4,"ngIf"],["type","tel","formControlName","phone"],["type","text","formControlName","city"],["formControlName","street","rows","3"],["formControlName","notes","rows","3"],[1,"payment-options"],[1,"payment-option"],["type","radio","formControlName","paymentMethod","value","cash_on_delivery"],[1,"payment-option","disabled"],["type","radio","value","online","disabled",""],[1,"order-summary","card"],[1,"summary-items"],["class","summary-item",4,"ngFor","ngForOf"],[1,"summary-total"],[1,"total-amount"],["type","submit",1,"btn","btn-primary",2,"width","100%","margin-top","1.5rem",3,"disabled"],[1,"error"],[1,"summary-item"],[1,"empty-cart"],["routerLink","/shop",1,"btn","btn-primary"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2),t.k0s(),t.DNE(3,y,54,23,"div",2)(4,C,5,2,"div",3),t.k0s()),2&n&&(t.R7$(2),t.JRh("ar"===a.currentLang?"\u0627\u0644\u062f\u0641\u0639":"Checkout"),t.R7$(),t.Y8G("ngIf",a.cartItems.length>0),t.R7$(),t.Y8G("ngIf",0===a.cartItems.length))},dependencies:[m.MD,m.Sq,m.bT,m.QX,o.YN,o.qT,o.me,o.Fm,o.BC,o.cb,o.X1,o.j4,o.JD,l.iI,l.Wk],styles:[".checkout-page[_ngcontent-%COMP%]{padding:2rem 0}.checkout-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;gap:2rem}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.payment-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.payment-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;border:2px solid var(--neutral-medium);border-radius:var(--border-radius);cursor:pointer;transition:all .3s ease;input[type=radio]{width:auto}&:has(input:checked){border-color:var(--accent);background-color:#c7a15a1a}&.disabled{opacity:.5;cursor:not-allowed}}.order-summary[_ngcontent-%COMP%]{position:sticky;top:100px;height:-moz-fit-content;height:fit-content;h2{margin-bottom:1.5rem;color:var(--accent)}.summary-items{margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid var(--neutral-medium);.summary-item{display:flex;justify-content:space-between;margin-bottom:.5rem;color:var(--text-secondary)}}.summary-total{display:flex;justify-content:space-between;font-size:1.5rem;font-weight:600;color:var(--accent)}}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}@media (max-width: 768px){.checkout-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.order-summary[_ngcontent-%COMP%]{position:static;order:-1;margin-bottom:2rem}.form-section[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 480px){.form-section[_ngcontent-%COMP%]{padding:1rem}.payment-option[_ngcontent-%COMP%]{padding:.75rem}}"]})}}return r})()}}]);